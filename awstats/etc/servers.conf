# AWStats Servers Configuration
# File: etc/servers.conf
# Version: 2.0.1
# Purpose: Domain and server definitions for PHP-based reporting
# Changes: v2.0.1 - Added configuration hierarchy support (global → domain → server)

[global]
# Database settings
database_file=$HOME/awstats/database/awstats.db
database_type=sqlite3

# Directory settings
base_dir=$HOME/awstats
htdocs_dir=$HOME/awstats/htdocs
logs_dir=$HOME/awstats/logs
reports_dir=$HOME/awstats/htdocs/reports

# AWStats settings (GLOBAL DEFAULTS - can be overridden per domain/server)
awstats_bin=/usr/local/awstats/wwwroot/cgi-bin/awstats.pl
awstats_data_dir=$HOME/awstats/data/awstats
awstats_config_dir=$HOME/awstats/etc/awstats
log_format=4                           # Default format for most domains
skip_hosts="127.0.0.1 localhost"
skip_files="REGEX[/\.css$|/\.js$|/\.png$|/\.jpg$|/\.gif$|/favicon\.ico$]"

# Processing settings
max_concurrent_processes=2
archive_processed_logs=yes
compress_archived_logs=yes
top_apis_count=25
retention_days=365

# Web interface settings
web_base_url=http://localhost/awstats-reports
items_per_page=25
enable_charts=yes
chart_library=chartjs

# Logging
log_level=info
log_file=$HOME/awstats/logs/awstats_system.log
debug_mode=no

# Domain configuration for SBIL API
[sbil-api.bos.njtransit.com]
display_name=SBIL API - Boston NJ Transit
environment=production
enabled=yes
servers=pnjt1sweb1,pnjt1sweb2
log_file_pattern=access-*.log
site_domain=sbil-api.bos.njtransit.com
combine_servers=no
# log_format=4                         # Uses global default (4)
# skip_hosts inherits from global      # Can override: skip_hosts="127.0.0.1 localhost internal.company.com"

# Example of domain with different log format
[api-v2.example.com]
display_name=API v2 - Different Format
environment=production
enabled=no
servers=web3,web4
log_format=1                           # OVERRIDE: Uses Combined Log Format instead of global default
skip_hosts="127.0.0.1 localhost 10.0.0.0/8"  # OVERRIDE: Additional internal networks
site_domain=api-v2.example.com

# Server definitions
[pnjt1sweb1]
server_display_name=Production Web Server 1
log_directory=$HOME/awstats/logs/pnjt1sweb1
log_file_pattern=access-*.log
enabled=yes
server_type=production
# log_format inherits from domain, then global
# Could override: log_format=4

[pnjt1sweb2]
server_display_name=Production Web Server 2
log_directory=$HOME/awstats/logs/pnjt1sweb2
log_file_pattern=access-*.log
enabled=yes
server_type=production
# log_format inherits from domain, then global

## Example server with specific override
#[web3]
#server_display_name=Special Format Server
#log_directory=$HOME/awstats/logs/web3
#log_file_pattern=access-*.log
#enabled=no
#server_type=production
#log_format=2                           # OVERRIDE: Uses Common Log Format for this specific server
#skip_files="REGEX[/\.css$|/\.js$]"     # OVERRIDE: Different file skip pattern
#
#
